(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{7375:function(e,t,a){Promise.resolve().then(a.bind(a,2476))},2476:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eP}});var r=a(7437),s=a(2265),n=a(4508);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});o.displayName="TableHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});i.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});m.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption";var u=a(7107),x=a(936),p=a(535);let f=(0,p.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-error text-error-foreground hover:bg-error/80",outline:"text-foreground",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",warning:"border-transparent bg-accent text-accent-foreground hover:bg-accent/80",danger:"border-transparent bg-error text-error-foreground hover:bg-error/80",info:"border-transparent bg-blue-500 text-white hover:bg-blue-500/80"}},defaultVariants:{variant:"default"}});function h(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(f({variant:a}),t),...s})}var j=a(1303);function g(e){let{expiryDate:t}=e;if(!t)return(0,r.jsx)(h,{variant:"outline",className:"opacity-50 text-[10px] uppercase",children:"No Record"});let a=new Date,s=(0,x.D)(t),n=(0,j.j)(s,a);return n<0?(0,r.jsx)(h,{variant:"danger",className:"uppercase text-[10px]",children:"Expired"}):n<90?(0,r.jsxs)(h,{variant:"warning",className:"uppercase text-[10px]",children:["Expiring (",n,"d)"]}):(0,r.jsx)(h,{variant:"success",className:"uppercase text-[10px]",children:"Valid"})}function y(e){let{status:t}=e;return(0,r.jsx)(h,{variant:{active:"success",pending:"warning",inactive:"secondary",on_leave:"info",terminated:"danger"}[t]||"outline",className:"uppercase text-[10px]",children:t.replace("_"," ")})}function v(e){let{employees:t}=e;return(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(l,{children:[(0,r.jsx)(o,{children:(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{children:"Name"}),(0,r.jsx)(c,{children:"Passport"}),(0,r.jsx)(c,{children:"Nationality"}),(0,r.jsx)(c,{children:"Visa Type"}),(0,r.jsx)(c,{children:"Expiry Date"}),(0,r.jsx)(c,{children:"Visa Status"}),(0,r.jsx)(c,{children:"Employment"})]})}),(0,r.jsx)(i,{children:0===t.length?(0,r.jsx)(d,{children:(0,r.jsx)(m,{colSpan:7,className:"h-24 text-center",children:"No employees found."})}):t.map(e=>{var t;let a=null===(t=e.visas)||void 0===t?void 0:t.find(e=>"active"===e.application_status);return(0,r.jsxs)(d,{children:[(0,r.jsxs)(m,{className:"font-semibold text-secondary",children:[e.first_name," ",e.last_name]}),(0,r.jsx)(m,{className:"font-mono text-xs uppercase tracking-wider",children:e.passport_number}),(0,r.jsx)(m,{children:e.nationality}),(0,r.jsx)(m,{className:"text-xs",children:(null==a?void 0:a.visa_type)||"N/A"}),(0,r.jsx)(m,{className:"font-mono text-xs",children:(null==a?void 0:a.expiry_date)?(0,u.WU)((0,x.D)(a.expiry_date),"dd/MM/yyyy"):"N/A"}),(0,r.jsx)(m,{children:(0,r.jsx)(g,{expiryDate:null==a?void 0:a.expiry_date})}),(0,r.jsx)(m,{children:(0,r.jsx)(y,{status:e.status})})]},e.id)})})]})})}var b=a(1713);async function N(e){let t=new URLSearchParams;e&&t.append("search",e);let a=await fetch("/api/employees?".concat(t.toString()));if(!a.ok){if(401===a.status)throw Error("Unauthorized");throw Error("Failed to fetch employees")}return a.json()}var w=a(9397),_=a(3247),S=a(5863),T=a(3245),R=a(1668);let C=R.zt,E=R.fC,D=R.xz,k=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(R.VY,{ref:t,sideOffset:s,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});k.displayName=R.VY.displayName;var P=a(9501),Z=a(5701),I=a(7119),O=a(1047),z=a(9827),V=a(7053);let A=(0,p.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:o=!1,...i}=e,d=o?V.g7:"button";return(0,r.jsx)(d,{className:(0,n.cn)(A({variant:s,size:l,className:a})),ref:t,...i})});F.displayName="Button";var M=a(1),U=a(2489);let Y=M.fC,q=M.xz,L=M.h_;M.x8;let W=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});W.displayName=M.aV.displayName;let G=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(L,{children:[(0,r.jsx)(W,{}),(0,r.jsxs)(M.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[s,(0,r.jsxs)(M.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(U.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});G.displayName=M.VY.displayName;let H=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};H.displayName="DialogHeader";let K=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};K.displayName="DialogFooter";let B=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});B.displayName=M.Dx.displayName;let J=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});J.displayName=M.dk.displayName;var Q=a(370);let $=(0,p.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Q.f,{ref:t,className:(0,n.cn)($(),a),...s})});X.displayName=Q.f.displayName;let ee=P.RV,et=s.createContext({}),ea=e=>{let{...t}=e;return(0,r.jsx)(et.Provider,{value:{name:t.name},children:(0,r.jsx)(P.Qr,{...t})})},er=()=>{let e=s.useContext(et),t=s.useContext(es),{getFieldState:a,formState:r}=(0,P.Gc)(),n=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},es=s.createContext({}),en=s.forwardRef((e,t)=>{let{className:a,...l}=e,o=s.useId();return(0,r.jsx)(es.Provider,{value:{id:o},children:(0,r.jsx)("div",{ref:t,className:(0,n.cn)("space-y-2",a),...l})})});en.displayName="FormItem";let el=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:l,formItemId:o}=er();return(0,r.jsx)(X,{ref:t,className:(0,n.cn)(l&&"text-destructive",a),htmlFor:o,...s})});el.displayName="FormLabel";let eo=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:n,formDescriptionId:l,formMessageId:o}=er();return(0,r.jsx)(V.g7,{ref:t,id:n,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...a})});eo.displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:l}=er();return(0,r.jsx)("p",{ref:t,id:l,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let ei=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e,{error:o,formMessageId:i}=er(),d=o?String(null==o?void 0:o.message):s;return d?(0,r.jsx)("p",{ref:t,id:i,className:(0,n.cn)("text-sm font-medium text-destructive",a),...l,children:d}):null});ei.displayName="FormMessage";let ed=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});ed.displayName="Input";var ec=a(5730),em=a(875),eu=a(2135),ex=a(401);let ep=ec.fC;ec.ZA;let ef=ec.B4,eh=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(ec.xz,{ref:t,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[s,(0,r.jsx)(ec.JO,{asChild:!0,children:(0,r.jsx)(em.Z,{className:"h-4 w-4 opacity-50"})})]})});eh.displayName=ec.xz.displayName;let ej=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(ec.u_,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(eu.Z,{className:"h-4 w-4"})})});ej.displayName=ec.u_.displayName;let eg=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(ec.$G,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(em.Z,{className:"h-4 w-4"})})});eg.displayName=ec.$G.displayName;let ey=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...o}=e;return(0,r.jsx)(ec.h_,{children:(0,r.jsxs)(ec.VY,{ref:t,className:(0,n.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...o,children:[(0,r.jsx)(ej,{}),(0,r.jsx)(ec.l_,{className:(0,n.cn)("p-1","popper"===l&&"h-[var(--radix-select-content-available-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(eg,{})]})})});ey.displayName=ec.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(ec.__,{ref:t,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=ec.__.displayName;let ev=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(ec.ck,{ref:t,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(ec.wU,{children:(0,r.jsx)(ex.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(ec.eT,{children:s})]})});ev.displayName=ec.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(ec.Z0,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=ec.Z0.displayName;var eb=a(2451),eN=a(407),ew=a(7811);function e_(e){let{className:t,classNames:a,showOutsideDays:s=!0,...l}=e;return(0,r.jsx)(ew._W,{showOutsideDays:s,className:(0,n.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)(A({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)(A({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,r.jsx)(eb.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,r.jsx)(eN.Z,{className:"h-4 w-4"})}},...l})}e_.displayName="Calendar";var eS=a(1777);let eT=eS.fC,eR=eS.xz,eC=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:l=4,...o}=e;return(0,r.jsx)(eS.h_,{children:(0,r.jsx)(eS.VY,{ref:t,align:s,sideOffset:l,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});eC.displayName=eS.VY.displayName;var eE=a(5153);let eD=I.Ry({first_name:I.Z_().min(2,{message:"First name must be at least 2 characters."}),last_name:I.Z_().min(2,{message:"Last name must be at least 2 characters."}),email:I.Z_().email({message:"Please enter a valid email address."}).optional().or(I.i0("")),phone:I.Z_().optional(),passport_number:I.Z_().min(5,{message:"Passport number is required."}),passport_expiry:I.hT({required_error:"Passport expiry date is required."}).optional(),nationality:I.Z_({required_error:"Please select a nationality."}),position:I.Z_().optional(),department:I.Z_().optional(),employment_start_date:I.hT().optional()});function ek(e){let{children:t,open:a,onOpenChange:l}=e,[o,i]=(0,s.useState)(!1),d=(0,z.NL)(),{toast:c}=(0,eE.pm)(),m=void 0!==a,x=m?l:i,p=(0,P.cI)({resolver:(0,Z.F)(eD),defaultValues:{first_name:"",last_name:"",email:"",phone:"",passport_number:"",nationality:"",position:"",department:""}});async function f(e){try{let t=await fetch("/api/employees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create employee")}c({title:"Success",description:"Employee added successfully."}),p.reset(),x&&x(!1),d.invalidateQueries({queryKey:["employees"]})}catch(e){c({variant:"destructive",title:"Error",description:e.message})}}return(0,r.jsxs)(Y,{open:m?a:o,onOpenChange:x,children:[t&&(0,r.jsx)(q,{asChild:!0,children:t}),(0,r.jsxs)(G,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(H,{children:[(0,r.jsx)(B,{children:"Add New Employee"}),(0,r.jsx)(J,{children:"Enter the details of the new TCN employee. Click save when you're done."})]}),(0,r.jsx)(ee,{...p,children:(0,r.jsxs)("form",{onSubmit:p.handleSubmit(f),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(ea,{control:p.control,name:"first_name",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsxs)(el,{children:["First Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(eo,{children:(0,r.jsx)(ed,{placeholder:"John",...t})}),(0,r.jsx)(ei,{})]})}}),(0,r.jsx)(ea,{control:p.control,name:"last_name",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsxs)(el,{children:["Last Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(eo,{children:(0,r.jsx)(ed,{placeholder:"Doe",...t})}),(0,r.jsx)(ei,{})]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(ea,{control:p.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsx)(el,{children:"Email"}),(0,r.jsx)(eo,{children:(0,r.jsx)(ed,{placeholder:"john.doe@example.com",...t})}),(0,r.jsx)(ei,{})]})}}),(0,r.jsx)(ea,{control:p.control,name:"phone",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsx)(el,{children:"Phone"}),(0,r.jsx)(eo,{children:(0,r.jsx)(ed,{placeholder:"+356 9999 9999",...t})}),(0,r.jsx)(ei,{})]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(ea,{control:p.control,name:"passport_number",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsxs)(el,{children:["Passport Number ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(eo,{children:(0,r.jsx)(ed,{placeholder:"A1234567",...t})}),(0,r.jsx)(ei,{})]})}}),(0,r.jsx)(ea,{control:p.control,name:"nationality",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsxs)(el,{children:["Nationality ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(ep,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(eo,{children:(0,r.jsx)(eh,{children:(0,r.jsx)(ef,{placeholder:"Select country"})})}),(0,r.jsxs)(ey,{children:[(0,r.jsx)(ev,{value:"Philippines",children:"Philippines"}),(0,r.jsx)(ev,{value:"India",children:"India"}),(0,r.jsx)(ev,{value:"Pakistan",children:"Pakistan"}),(0,r.jsx)(ev,{value:"Nepal",children:"Nepal"}),(0,r.jsx)(ev,{value:"Serbia",children:"Serbia"}),(0,r.jsx)(ev,{value:"Colombia",children:"Colombia"}),(0,r.jsx)(ev,{value:"United Kingdom",children:"United Kingdom"})]})]}),(0,r.jsx)(ei,{})]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(ea,{control:p.control,name:"passport_expiry",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{className:"flex flex-col",children:[(0,r.jsx)(el,{children:"Passport Expiry"}),(0,r.jsxs)(eT,{children:[(0,r.jsx)(eR,{asChild:!0,children:(0,r.jsx)(eo,{children:(0,r.jsxs)(F,{variant:"outline",className:(0,n.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,u.WU)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(O.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(eC,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(e_,{mode:"single",selected:t.value,onSelect:t.onChange,disabled:e=>e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,r.jsx)(ei,{})]})}}),(0,r.jsx)(ea,{control:p.control,name:"employment_start_date",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{className:"flex flex-col",children:[(0,r.jsx)(el,{children:"Start Date"}),(0,r.jsxs)(eT,{children:[(0,r.jsx)(eR,{asChild:!0,children:(0,r.jsx)(eo,{children:(0,r.jsxs)(F,{variant:"outline",className:(0,n.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,u.WU)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(O.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(eC,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(e_,{mode:"single",selected:t.value,onSelect:t.onChange,disabled:e=>e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,r.jsx)(ei,{})]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(ea,{control:p.control,name:"department",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsx)(el,{children:"Department"}),(0,r.jsx)(eo,{children:(0,r.jsx)(ed,{placeholder:"Operations",...t})}),(0,r.jsx)(ei,{})]})}}),(0,r.jsx)(ea,{control:p.control,name:"position",render:e=>{let{field:t}=e;return(0,r.jsxs)(en,{children:[(0,r.jsx)(el,{children:"Position"}),(0,r.jsx)(eo,{children:(0,r.jsx)(ed,{placeholder:"Driver",...t})}),(0,r.jsx)(ei,{})]})}})]}),(0,r.jsx)(K,{children:(0,r.jsxs)(F,{type:"submit",disabled:p.formState.isSubmitting,children:[p.formState.isSubmitting&&(0,r.jsx)(S.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Employee"]})})]})})]})]})}function eP(){let[e,t]=(0,s.useState)(""),{data:a,isLoading:n,isError:l}=(0,b.a)({queryKey:["employees",e],queryFn:()=>N(e)}),o=(null==a?void 0:a.filter(e=>{var t;let a=null===(t=e.visas)||void 0===t?void 0:t.find(e=>"active"===e.application_status||"valid"===e.status);if(!a)return!1;let r=Math.ceil((new Date(a.expiry_date).getTime()-new Date().getTime())/864e5);return r>=0&&r<90}).length)||0,i=(null==a?void 0:a.filter(e=>{var t;let a=null===(t=e.visas)||void 0===t?void 0:t.find(e=>"active"===e.application_status||"valid"===e.status||"expired"===e.status);return!!a&&(new Date(a.expiry_date).getTime()-new Date().getTime())/864e5<0}).length)||0,d=(null==a?void 0:a.length)||0,c=(null==a?void 0:a.filter(e=>{var t;let a=null===(t=e.visas)||void 0===t?void 0:t.find(e=>"active"===e.application_status||"valid"===e.status);return!!a&&(new Date(a.expiry_date).getTime()-new Date().getTime())/864e5>=0}).length)||0,m=0===d?100:Math.round(c/d*100);return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,r.jsx)("header",{className:"border-b bg-white",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-primary rounded flex items-center justify-center text-white font-bold text-xl",children:"V"}),(0,r.jsxs)("span",{className:"text-xl font-bold tracking-tight text-secondary",children:["VisaTrack ",(0,r.jsx)("span",{className:"text-primary",children:"Malta"})]})]}),(0,r.jsxs)("nav",{className:"flex gap-6",children:[(0,r.jsx)("span",{className:"text-sm font-medium border-b-2 border-primary py-5",children:"Employees"}),(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground py-5 hover:text-secondary cursor-pointer",children:"Documents"}),(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground py-5 hover:text-secondary cursor-pointer",children:"Reports"})]})]})}),(0,r.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-end mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-secondary",children:"Workforce Overview"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:"Manage TCN compliance and visa renewals."})]}),(0,r.jsx)(ek,{children:(0,r.jsxs)("button",{className:"bg-primary text-white px-4 py-2 rounded-md font-medium text-sm hover:bg-primary/90 transition-colors flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),"Add Employee"]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,r.jsx)(eZ,{title:"Total TCNs",value:n?"...":d.toString()}),(0,r.jsx)(eZ,{title:"Expiring Soon",value:n?"...":o.toString(),color:"text-accent"}),(0,r.jsx)(eZ,{title:"Expired",value:n?"...":i.toString(),color:"text-error"}),(0,r.jsx)(eZ,{title:"Compliance Health",value:n?"...":"".concat(m,"%"),color:m<80?"text-error":m<100?"text-accent":"text-success",hasInfo:!0,infoText:"Percentage of employees with valid (non-expired) visas."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-4 border-b bg-slate-50/50 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsx)("h2",{className:"font-semibold text-secondary",children:"Employee Compliance List"}),(0,r.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,r.jsx)(_.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:"Search passport or name...",className:"text-xs border rounded-md pl-9 pr-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-primary/20",value:e,onChange:e=>t(e.target.value)})]})]}),n?(0,r.jsx)("div",{className:"p-12 flex justify-center items-center",children:(0,r.jsx)(S.Z,{className:"w-8 h-8 animate-spin text-primary"})}):l?(0,r.jsx)("div",{className:"p-12 text-center text-error",children:"Error loading employee data. Please try again."}):(0,r.jsx)(v,{employees:a||[]})]})]})]})}function eZ(e){let{title:t,value:a,color:s="text-secondary",hasInfo:l=!1,infoText:o=""}=e;return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border relative",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("h3",{className:"text-muted-foreground text-[10px] font-bold uppercase tracking-widest",children:t}),l&&(0,r.jsx)(C,{children:(0,r.jsxs)(E,{children:[(0,r.jsx)(D,{asChild:!0,children:(0,r.jsx)("button",{className:"text-muted-foreground hover:text-secondary",children:(0,r.jsx)(T.Z,{className:"w-3 h-3"})})}),(0,r.jsx)(k,{children:(0,r.jsx)("p",{className:"max-w-xs",children:o})})]})})]}),(0,r.jsx)("p",{className:(0,n.cn)("text-3xl font-bold mt-2",s),children:a})]})}},5153:function(e,t,a){"use strict";a.d(t,{pm:function(){return u}});var r=a(2265);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=o(d,e),i.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(1994),s=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[750,522,971,117,744],function(){return e(e.s=7375)}),_N_E=e.O()}]);