"use strict";(()=>{var e={};e.id=572,e.ids=[572],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8437:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>b,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var o={};r.r(o),r.d(o,{GET:()=>d,POST:()=>p,dynamic:()=>c});var s=r(9303),n=r(8716),a=r(670),i=r(344),l=r(8757),u=r(7070);let c="force-dynamic";async function d(e){console.log("[API] Initializing Supabase client...");try{let t=(0,i.createRouteHandlerClient)({cookies:l.cookies});console.log("[API] Supabase client initialized.");let{searchParams:r}=new URL(e.url),o=r.get("search"),{data:{session:s},error:n}=await t.auth.getSession();if(n)return console.error("[API] Auth Session Error:",n.message),u.NextResponse.json({error:`Authentication error: ${n.message}`},{status:401});if(!s)return console.warn("[API] No active session found."),u.NextResponse.json({error:"Unauthorized: Please log in"},{status:401});console.log(`[API] Fetching profile for user: ${s.user.id}`);let{data:a,error:c}=await t.from("profiles").select("company_id").eq("id",s.user.id).single();if(c){if(console.error("[API] Profile Fetch Error:",c.message),"42P01"===c.code)return console.warn("[API] Fallback: Profiles table does not exist. Check migrations."),u.NextResponse.json({error:'Database table "profiles" missing. Did you run the Supabase migrations?',fallback:!0},{status:500});return u.NextResponse.json({error:`Authorization error: ${c.message}`},{status:403})}if(!a?.company_id)return console.warn(`[API] No company_id found for user ${s.user.id}`),u.NextResponse.json({error:"User is not associated with any company profile."},{status:403});console.log(`[API] Executing query for company: ${a.company_id}`);let d=t.from("employees").select("*, visas(*)").eq("company_id",a.company_id);o&&(console.log(`[API] Applying search filter: "${o}"`),d=d.or(`first_name.ilike.%${o}%,last_name.ilike.%${o}%,passport_number.ilike.%${o}%`));let{data:p,error:f}=await d;if(f){if(console.error("[API] Employee Fetch Error:",f.message),console.error("[API] Error Code:",f.code),"42P01"===f.code)return console.warn("[API] Fallback: Employees table does not exist. Returning empty array with warning."),u.NextResponse.json([],{headers:{"X-Warning":'Database table "employees" missing. Migrations required.'}});return u.NextResponse.json({error:`Database error: ${f.message}`},{status:500})}return console.log(`[API] Successfully retrieved ${p?.length||0} employees.`),u.NextResponse.json(p)}catch(e){return console.error("[API] Unexpected Server Error:",e),u.NextResponse.json({error:"An unexpected internal server error occurred.",details:e?.message||"No additional details available"},{status:500})}}async function p(e){try{let t=(0,i.createRouteHandlerClient)({cookies:l.cookies}),r=await e.json(),{data:{session:o}}=await t.auth.getSession();if(!o)return u.NextResponse.json({error:"Unauthorized"},{status:401});let{data:s,error:n}=await t.from("profiles").select("company_id").eq("id",o.user.id).single();if(n||!s?.company_id)return u.NextResponse.json({error:"Company profile not found"},{status:403});let{data:a,error:c}=await t.from("employees").insert({company_id:s.company_id,first_name:r.first_name,last_name:r.last_name,email:r.email,phone:r.phone,passport_number:r.passport_number,nationality:r.nationality,position:r.position,department:r.department,status:"active",employment_start_date:r.employment_start_date||null,passport_expiry:r.passport_expiry||null}).select().single();if(c)return console.error("Error creating employee:",c),u.NextResponse.json({error:`Failed to create employee: ${c.message}`},{status:500});return u.NextResponse.json(a)}catch(e){return console.error("Server error:",e),u.NextResponse.json({error:"Internal Server Error"},{status:500})}}let f=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/employees/route",pathname:"/api/employees",filename:"route",bundlePath:"app/api/employees/route"},resolvedPagePath:"/Users/glennbundy/Desktop/visatrack-malta/app/api/employees/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:m}=f,y="/api/employees/route";function b(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},344:(e,t,r)=>{var o,s=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(l,{createBrowserSupabaseClient:()=>P,createClientComponentClient:()=>c,createMiddlewareClient:()=>v,createMiddlewareSupabaseClient:()=>O,createPagesBrowserClient:()=>d,createPagesServerClient:()=>g,createRouteHandlerClient:()=>x,createServerActionClient:()=>w,createServerComponentClient:()=>C,createServerSupabaseClient:()=>E}),e.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||void 0===r||s(e,r,{get:()=>t[r],enumerable:!(o=n(t,r))||o.enumerable});return e})(s({},"__esModule",{value:!0}),l);var u=r(6271);function c({supabaseUrl:e="https://placeholder-url.supabase.co",supabaseKey:t=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:r,cookieOptions:s,isSingleton:n=!0}={}){if(!e||!t)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");let a=()=>{var o;return(0,u.createSupabaseClient)(e,t,{...r,global:{...null==r?void 0:r.global,headers:{...null==(o=null==r?void 0:r.global)?void 0:o.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.7"}},auth:{storage:new u.BrowserCookieAuthStorageAdapter(s)}})};if(n){let e=o??a();return"undefined"==typeof window?e:(o||(o=e),o)}return a()}var d=c,p=r(6271),f=r(2338),h=class extends p.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t,r,o;return(0,f.splitCookiesString)((null==(r=null==(t=this.context.res)?void 0:t.getHeader("set-cookie"))?void 0:r.toString())??"").map(t=>(0,p.parseCookies)(t)[e]).find(e=>!!e)??(null==(o=this.context.req)?void 0:o.cookies[e])}setCookie(e,t){this._setCookie(e,t)}deleteCookie(e){this._setCookie(e,"",{maxAge:0})}_setCookie(e,t,r){var o;let s=(0,f.splitCookiesString)((null==(o=this.context.res.getHeader("set-cookie"))?void 0:o.toString())??"").filter(t=>!(e in(0,p.parseCookies)(t))),n=(0,p.serializeCookie)(e,t,{...this.cookieOptions,...r,httpOnly:!1});this.context.res.setHeader("set-cookie",[...s,n])}};function g(e,{supabaseUrl:t="https://placeholder-url.supabase.co",supabaseKey:r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:o,cookieOptions:s}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,p.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(n=null==o?void 0:o.global)?void 0:n.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.7"}},auth:{storage:new h(e,s)}})}var m=r(6271),y=r(2338),b=class extends m.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t;return(0,y.splitCookiesString)((null==(t=this.context.res.headers.get("set-cookie"))?void 0:t.toString())??"").map(t=>(0,m.parseCookies)(t)[e]).find(e=>!!e)||(0,m.parseCookies)(this.context.req.headers.get("cookie")??"")[e]}setCookie(e,t){this._setCookie(e,t)}deleteCookie(e){this._setCookie(e,"",{maxAge:0})}_setCookie(e,t,r){let o=(0,m.serializeCookie)(e,t,{...this.cookieOptions,...r,httpOnly:!1});this.context.res.headers&&this.context.res.headers.append("set-cookie",o)}};function v(e,{supabaseUrl:t="https://placeholder-url.supabase.co",supabaseKey:r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:o,cookieOptions:s}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,m.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(n=null==o?void 0:o.global)?void 0:n.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.7"}},auth:{storage:new b(e,s)}})}var k=r(6271),A=class extends k.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t;return null==(t=this.context.cookies().get(e))?void 0:t.value}setCookie(e,t){}deleteCookie(e){}};function C(e,{supabaseUrl:t="https://placeholder-url.supabase.co",supabaseKey:r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:o,cookieOptions:s}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,k.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(n=null==o?void 0:o.global)?void 0:n.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.7"}},auth:{storage:new A(e,s)}})}var _=r(6271),S=class extends _.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t;return null==(t=this.context.cookies().get(e))?void 0:t.value}setCookie(e,t){this.context.cookies().set(e,t,this.cookieOptions)}deleteCookie(e){this.context.cookies().set(e,"",{...this.cookieOptions,maxAge:0})}};function x(e,{supabaseUrl:t="https://placeholder-url.supabase.co",supabaseKey:r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:o,cookieOptions:s}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,_.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(n=null==o?void 0:o.global)?void 0:n.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.8.7"}},auth:{storage:new S(e,s)}})}var w=x;function P({supabaseUrl:e="https://placeholder-url.supabase.co",supabaseKey:t=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:r,cookieOptions:o}={}){return console.warn("Please utilize the `createPagesBrowserClient` function instead of the deprecated `createBrowserSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),d({supabaseUrl:e,supabaseKey:t,options:r,cookieOptions:o})}function E(e,{supabaseUrl:t="https://placeholder-url.supabase.co",supabaseKey:r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:o,cookieOptions:s}={}){return console.warn("Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),g(e,{supabaseUrl:t,supabaseKey:r,options:o,cookieOptions:s})}function O(e,{supabaseUrl:t="https://placeholder-url.supabase.co",supabaseKey:r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:o,cookieOptions:s}={}){return console.warn("Please utilize the `createMiddlewareClient` function instead of the deprecated `createMiddlewareSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs#middleware"),v(e,{supabaseUrl:t,supabaseKey:r,options:o,cookieOptions:s})}},3085:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return n}});let o=r(5869),s=r(6278);class n{get isEnabled(){return this._provider.isEnabled}enable(){let e=o.staticGenerationAsyncStorage.getStore();return e&&(0,s.trackDynamicDataAccessed)(e,"draftMode().enable()"),this._provider.enable()}disable(){let e=o.staticGenerationAsyncStorage.getStore();return e&&(0,s.trackDynamicDataAccessed)(e,"draftMode().disable()"),this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cookies:function(){return p},draftMode:function(){return f},headers:function(){return d}});let o=r(8996),s=r(3047),n=r(2044),a=r(2934),i=r(3085),l=r(6278),u=r(5869),c=r(4580);function d(){let e="headers",t=u.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return s.HeadersAdapter.seal(new Headers({}));(0,l.trackDynamicDataAccessed)(t,e)}return(0,c.getExpectedRequestStore)(e).headers}function p(){let e="cookies",t=u.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return o.RequestCookiesAdapter.seal(new n.RequestCookies(new Headers({})));(0,l.trackDynamicDataAccessed)(t,e)}let r=(0,c.getExpectedRequestStore)(e),s=a.actionAsyncStorage.getStore();return(null==s?void 0:s.isAction)||(null==s?void 0:s.isAppRoute)?r.mutableCookies:r.cookies}function f(){let e=(0,c.getExpectedRequestStore)("draftMode");return new i.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3047:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return n},ReadonlyHeadersError:function(){return s}});let o=r(8238);class s extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new s}}class n extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,s){if("symbol"==typeof r)return o.ReflectAdapter.get(t,r,s);let n=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===n);if(void 0!==a)return o.ReflectAdapter.get(t,a,s)},set(t,r,s,n){if("symbol"==typeof r)return o.ReflectAdapter.set(t,r,s,n);let a=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);return o.ReflectAdapter.set(t,i??r,s,n)},has(t,r){if("symbol"==typeof r)return o.ReflectAdapter.has(t,r);let s=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===s);return void 0!==n&&o.ReflectAdapter.has(t,n)},deleteProperty(t,r){if("symbol"==typeof r)return o.ReflectAdapter.deleteProperty(t,r);let s=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===s);return void 0===n||o.ReflectAdapter.deleteProperty(t,n)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return s.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new n(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,o]of this.entries())e.call(t,o,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},8996:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return d},ReadonlyRequestCookiesError:function(){return a},RequestCookiesAdapter:function(){return i},appendMutableCookies:function(){return c},getModifiedCookieValues:function(){return u}});let o=r(2044),s=r(8238),n=r(5869);class a extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new a}}class i{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return a.callable;default:return s.ReflectAdapter.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function u(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function c(e,t){let r=u(t);if(0===r.length)return!1;let s=new o.ResponseCookies(e),n=s.getAll();for(let e of r)s.set(e);for(let e of n)s.set(e);return!0}class d{static wrap(e,t){let r=new o.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let a=[],i=new Set,u=()=>{let e=n.staticGenerationAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),a=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of a){let r=new o.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case l:return a;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{u()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{u()}};default:return s.ReflectAdapter.get(e,t,r)}}})}}},2338:e=>{var t={decodeValues:!0,map:!1,silent:!1};function r(e){return"string"!=typeof e||e in{}}function o(){return Object.create(null)}function s(e){return"string"==typeof e&&!!e.trim()}function n(e,n){var a,i,l,u,c=e.split(";").filter(s),d=(a=c.shift(),i="",l="",(u=a.split("=")).length>1?(i=u.shift(),l=u.join("=")):l=a,{name:i,value:l}),p=d.name,f=d.value;if(n=n?Object.assign({},t,n):t,r(p))return null;try{f=n.decodeValues?decodeURIComponent(f):f}catch(e){console.error("set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.",e)}var h=o();return h.name=p,h.value=f,c.forEach(function(e){var t=e.split("="),o=t.shift().trimLeft().toLowerCase();if(!r(o)){var s=t.join("=");if("expires"===o)h.expires=new Date(s);else if("max-age"===o){var n=parseInt(s,10);Number.isNaN(n)||(h.maxAge=n)}else"secure"===o?h.secure=!0:"httponly"===o?h.httpOnly=!0:"samesite"===o?h.sameSite=s:"partitioned"===o?h.partitioned=!0:o&&(h[o]=s)}}),h}function a(e,a){if(a=a?Object.assign({},t,a):t,!e)return a.map?o():[];if(e.headers){if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var i=e.headers[Object.keys(e.headers).find(function(e){return"set-cookie"===e.toLowerCase()})];i||!e.headers.cookie||a.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=i}}if(Array.isArray(e)||(e=[e]),!a.map)return e.filter(s).map(function(e){return n(e,a)}).filter(Boolean);var l=o();return e.filter(s).reduce(function(e,t){var o=n(t,a);return o&&!r(o.name)&&(e[o.name]=o),e},l)}e.exports=a,e.exports.parse=a,e.exports.parseString=n,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,o,s,n,a=[],i=0;function l(){for(;i<e.length&&/\s/.test(e.charAt(i));)i+=1;return i<e.length}for(;i<e.length;){for(t=i,n=!1;l();)if(","===(r=e.charAt(i))){for(o=i,i+=1,l(),s=i;i<e.length&&"="!==(r=e.charAt(i))&&";"!==r&&","!==r;)i+=1;i<e.length&&"="===e.charAt(i)?(n=!0,i=s,a.push(e.substring(t,o)),t=i):i=o+1}else i+=1;(!n||i>=e.length)&&a.push(e.substring(t,e.length))}return a}},6271:(e,t,r)=>{let o,s;r.r(t),r.d(t,{BrowserCookieAuthStorageAdapter:()=>w,CookieAuthStorageAdapter:()=>x,DEFAULT_COOKIE_OPTIONS:()=>_,createSupabaseClient:()=>P,isBrowser:()=>C,parseCookies:()=>E,parseSupabaseCookie:()=>k,serializeCookie:()=>O,stringifySupabaseSession:()=>A});let n=require("buffer"),a=(new TextEncoder,new TextDecoder);n.Buffer.isEncoding("base64url");let i=e=>n.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=a.decode(t)),t}(e),"base64");var l=r(7857),u=Object.create,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,f=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,g=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of p(t))h.call(e,s)||s===r||c(e,s,{get:()=>t[s],enumerable:!(o=d(t,s))||o.enumerable});return e},m=(e,t,r)=>(r=null!=e?u(f(e)):{},g(!t&&e&&e.__esModule?r:c(r,"default",{value:e,enumerable:!0}),e)),y=(o={"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(e){e.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},s=(t||{}).decode||o,n=0;n<e.length;){var a=e.indexOf("=",n);if(-1===a)break;var i=e.indexOf(";",n);if(-1===i)i=e.length;else if(i<a){n=e.lastIndexOf(";",a-1)+1;continue}var l=e.slice(n,a).trim();if(void 0===r[l]){var u=e.slice(a+1,i).trim();34===u.charCodeAt(0)&&(u=u.slice(1,-1)),r[l]=function(e,t){try{return t(e)}catch(t){return e}}(u,s)}n=i+1}return r},e.serialize=function(e,o,n){var a=n||{},i=a.encode||s;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!r.test(e))throw TypeError("argument name is invalid");var l=i(o);if(l&&!r.test(l))throw TypeError("argument val is invalid");var u=e+"="+l;if(null!=a.maxAge){var c=a.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(a.domain){if(!r.test(a.domain))throw TypeError("option domain is invalid");u+="; Domain="+a.domain}if(a.path){if(!r.test(a.path))throw TypeError("option path is invalid");u+="; Path="+a.path}if(a.expires){var d=a.expires;if("[object Date]"!==t.call(d)&&!(d instanceof Date)||isNaN(d.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+d.toUTCString()}if(a.httpOnly&&(u+="; HttpOnly"),a.secure&&(u+="; Secure"),a.priority)switch("string"==typeof a.priority?a.priority.toLowerCase():a.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var t=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function s(e){return encodeURIComponent(e)}}},function(){return s||(0,o[p(o)[0]])((s={exports:{}}).exports,s),s.exports}),b=m(y()),v=m(y());function k(e){if(!e)return null;try{let t=JSON.parse(e);if(!t)return null;if("Object"===t.constructor.name)return t;if("Array"!==t.constructor.name)throw Error(`Unexpected format: ${t.constructor.name}`);let[r,o,s]=t[0].split("."),n=i(o),a=new TextDecoder,{exp:l,sub:u,...c}=JSON.parse(a.decode(n));return{expires_at:l,expires_in:l-Math.round(Date.now()/1e3),token_type:"bearer",access_token:t[0],refresh_token:t[1],provider_token:t[2],provider_refresh_token:t[3],user:{id:u,factors:t[4],...c}}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function A(e){var t;return JSON.stringify([e.access_token,e.refresh_token,e.provider_token,e.provider_refresh_token,(null==(t=e.user)?void 0:t.factors)??null])}function C(){return"undefined"!=typeof window&&void 0!==window.document}var _={path:"/",sameSite:"lax",maxAge:31536e6},S=RegExp(".{1,3180}","g"),x=class{constructor(e){this.cookieOptions={..._,...e,maxAge:_.maxAge}}getItem(e){let t=this.getCookie(e);if(e.endsWith("-code-verifier")&&t)return t;if(t)return JSON.stringify(k(t));let r=function(e,t=()=>null){let r=[];for(let o=0;;o++){let s=t(`${e}.${o}`);if(!s)break;r.push(s)}return r.length?r.join(""):null}(e,e=>this.getCookie(e));return null!==r?JSON.stringify(k(r)):null}setItem(e,t){if(e.endsWith("-code-verifier")){this.setCookie(e,t);return}(function(e,t,r){if(1===Math.ceil(t.length/((void 0)??3180)))return[{name:e,value:t}];let o=[],s=t.match(S);return null==s||s.forEach((t,r)=>{let s=`${e}.${r}`;o.push({name:s,value:t})}),o})(e,A(JSON.parse(t))).forEach(e=>{this.setCookie(e.name,e.value)})}removeItem(e){this._deleteSingleCookie(e),this._deleteChunkedCookies(e)}_deleteSingleCookie(e){this.getCookie(e)&&this.deleteCookie(e)}_deleteChunkedCookies(e,t=0){for(let r=t;;r++){let t=`${e}.${r}`;if(void 0===this.getCookie(t))break;this.deleteCookie(t)}}},w=class extends x{constructor(e){super(e)}getCookie(e){return C()?(0,b.parse)(document.cookie)[e]:null}setCookie(e,t){if(!C())return null;document.cookie=(0,b.serialize)(e,t,{...this.cookieOptions,httpOnly:!1})}deleteCookie(e){if(!C())return null;document.cookie=(0,b.serialize)(e,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function P(e,t,r){var o;let s=C();return(0,l.eI)(e,t,{...r,auth:{flowType:"pkce",autoRefreshToken:s,detectSessionInUrl:s,persistSession:!0,storage:r.auth.storage,...(null==(o=r.auth)?void 0:o.storageKey)?{storageKey:r.auth.storageKey}:{}}})}var E=v.parse,O=v.serialize}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,564],()=>r(8437));module.exports=o})();